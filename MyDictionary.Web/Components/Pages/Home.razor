@page "/"
@using MyDictionary.Web.Services
@inject AuthenticationStateService AuthService
@inject ILogger<Home> Logger

<PageTitle>MyDictionary</PageTitle>

<div class="home-container">
    <!-- Son Ba≈ülƒ±klar -->
    <div class="section">
        <h2 class="section-title">son ba≈ülƒ±klar</h2>
        <div class="topics-list">
            <div class="topic-item">
                <a href="/topic/yazilim-gelistirme" class="topic-link">yazƒ±lƒ±m geli≈ütirme</a>
                <span class="topic-info">
                    <span class="entry-count">42 entry</span>
                    <span class="last-update">3 dakika √∂nce</span>
                </span>
            </div>
            <div class="topic-item">
                <a href="/topic/react-hooks" class="topic-link">react hooks</a>
                <span class="topic-info">
                    <span class="entry-count">18 entry</span>
                    <span class="last-update">12 dakika √∂nce</span>
                </span>
            </div>
            <div class="topic-item">
                <a href="/topic/asp-net-core-mvc" class="topic-link">asp.net core mvc</a>
                <span class="topic-info">
                    <span class="entry-count">25 entry</span>
                    <span class="last-update">1 saat √∂nce</span>
                </span>
            </div>
            <div class="topic-item">
                <a href="/topic/veritabani-tasarim" class="topic-link">veritabanƒ± tasarƒ±m</a>
                <span class="topic-info">
                    <span class="entry-count">33 entry</span>
                    <span class="last-update">2 saat √∂nce</span>
                </span>
            </div>
            <div class="topic-item">
                <a href="/topic/javascript-es6" class="topic-link">javascript es6</a>
                <span class="topic-info">
                    <span class="entry-count">67 entry</span>
                    <span class="last-update">4 saat √∂nce</span>
                </span>
            </div>
        </div>
    </div>

    <!-- G√ºn√ºn Ba≈ülƒ±klarƒ± -->
    <div class="section">
        <h2 class="section-title">g√ºn√ºn ba≈ülƒ±klarƒ±</h2>
        <div class="topics-list">
            <div class="topic-item featured">
                <a href="/topic/remote-calisma" class="topic-link">remote √ßalƒ±≈üma</a>
                <span class="topic-info">
                    <span class="entry-count">156 entry</span>
                    <span class="last-update">aktif</span>
                </span>
            </div>
            <div class="topic-item">
                <a href="/topic/programlama-dilleri" class="topic-link">programlama dilleri</a>
                <span class="topic-info">
                    <span class="entry-count">89 entry</span>
                    <span class="last-update">5 dakika √∂nce</span>
                </span>
            </div>
            <div class="topic-item">
                <a href="/topic/web-tasarim-trendleri" class="topic-link">web tasarƒ±m trendleri</a>
                <span class="topic-info">
                    <span class="entry-count">74 entry</span>
                    <span class="last-update">15 dakika √∂nce</span>
                </span>
            </div>
        </div>
    </div>

    <!-- Son G√ºncellemeler -->
    <div class="section">
        <h2 class="section-title">son g√ºncellemeler</h2>
        <div class="entry-preview">
            <div class="entry-item">
                <div class="entry-header">
                    <a href="/topic/yazilim-gelistirme" class="entry-topic">yazƒ±lƒ±m geli≈ütirme</a>
                    <span class="entry-meta">
                        <a href="/user/developer123" class="entry-author">developer123</a>
                        <span class="entry-time">5 dakika √∂nce</span>
                    </span>
                </div>
                <div class="entry-content">
                    yazƒ±lƒ±m geli≈ütirme s√ºrecinde en √∂nemli ≈üey kod kalitesi ve s√ºrd√ºr√ºlebilirlik. 
                    clean code prensipleri ve test driven development...
                </div>
            </div>
            <div class="entry-item">
                <div class="entry-header">
                    <a href="/topic/react-hooks" class="entry-topic">react hooks</a>
                    <span class="entry-meta">
                        <a href="/user/frontend_dev" class="entry-author">frontend_dev</a>
                        <span class="entry-time">12 dakika √∂nce</span>
                    </span>
                </div>
                <div class="entry-content">
                    useEffect hook'u ile component lifecycle'ƒ± y√∂netmek √ßok daha kolay hale geldi. 
                    √∂zellikle cleanup fonksiyonlarƒ±...
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    protected override async Task OnInitializedAsync()
    {
        await AuthService.InitializeAsync();
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await AuthService.LoadFromStorageAsync();
            Logger.LogInformation($"üè† Ana sayfa - IsAuthenticated: {AuthService.IsAuthenticated}");
            Logger.LogInformation($"üè† Ana sayfa - CurrentUser: {AuthService.CurrentUser?.Username ?? "null"}");
        }
    }
}